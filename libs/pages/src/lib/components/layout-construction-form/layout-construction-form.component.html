
<form [formGroup]="layoutForm">

  <button mat-mini-fab (click)="addItem()" class="add-button cols-2">
    <mat-icon>add</mat-icon>
  </button>

  <gridster formArrayName="panels" [options]="options">
    <gridster-item [item]="item" *ngFor="let item of dashboard; let i = index" formGroupName="{{i}}">

      <mat-menu #ops="matMenu">
        <button (mousedown)="addContent(i)" (touchstart)="addContent(i)">Add Content</button>
        <button (mousedown)="removeItem($event, item)" (touchstart)="removeItem($event, item)">Delete</button>
      </mat-menu>

      <button mat-icon-button [matMenuTriggerFor]="ops">
        <mat-icon>more_vert</mat-icon>
      </button>

      <div class="panel" formArrayName="panes">
        <ng-container *ngFor="let pane of panelPanes(i).controls; let j = index">
          <classifieds-ui-editable-pane [providerName]="panelPaneProvider(i, j)" [settings]="panelPaneSettings(i, j)"></classifieds-ui-editable-pane>
        </ng-container>
      </div>

    </gridster-item>
  </gridster>

</form>

