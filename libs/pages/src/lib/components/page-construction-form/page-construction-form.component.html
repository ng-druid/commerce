<form [formGroup]="pageForm" (ngSubmit)="submit($event)" fxLayout="column" fxFill>
  <div>
    <div fxLayout="row">
      <mat-form-field fxflex="50">
        <input matInput placeholder="Title" formControlName="title" required>
        <mat-icon matSuffix>title</mat-icon>
      </mat-form-field>
      <mat-checkbox formControlName="published">Published</mat-checkbox>
      <div>
        <button type="submit" [disabled]="!pageForm.valid">Save</button>
      </div>
    </div>
  </div>
  <div fxFill>
    <div fxLayout="row" fxFil fxLayoutGap="2em"l>
      <div fxFlex="50">
        <mat-accordion [multi]="false" fxLayout="column" fxFill>
          <mat-expansion-panel expanded>
            <mat-expansion-panel-header>
              <mat-panel-title>Content</mat-panel-title>
              <mat-panel-description>Markup content of the page.</mat-panel-description>
            </mat-expansion-panel-header>
            <textarea formControlName="body"></textarea>
          </mat-expansion-panel>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>Selection Rules</mat-panel-title>
              <mat-panel-description>Rule to display page.</mat-panel-description>
            </mat-expansion-panel-header>
            <mat-form-field>
              <input matInput placeholder="Path" formControlName="path" required>
            </mat-form-field>
          </mat-expansion-panel>
          <mat-expansion-panel>
            <mat-expansion-panel-header>
              <mat-panel-title>Context Mappings</mat-panel-title>
              <mat-panel-description>Provide contexts for input arguments.</mat-panel-description>
            </mat-expansion-panel-header>
            <p>Context mappings</p>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
      <div fxFlex="50">
        <div class="preview-window">
          <classifieds-ui-dynamic-content-viewer [content]="body | markdown"></classifieds-ui-dynamic-content-viewer>
        </div>
      </div>
    </div>
  </div>
</form>
