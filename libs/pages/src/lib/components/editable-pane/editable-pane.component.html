<div class="editable-pane-wrapper">
  <div class="pane-header">
    <button type="button" (click)="onEditClick()">Edit</button>
    <button *ngIf="!preview" type="button" (click)="onPreviewClick()">Preview</button>
    <button *ngIf="preview" type="button" (click)="onDisablePreviewClick()">Disable Preview</button>
    <button type="button" class="delete" (click)="onDeleteClick()">Delete</button>
  </div>
  <div class="inner-pane-wrapper">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>Content: {{ contentPlugin.title }}</mat-panel-title>
        <mat-panel-description>Name: {{ name }} | Label: {{ label }}</mat-panel-description>
      </mat-expansion-panel-header>
      <div [hidden]="preview">
        <ul>
          <ng-container *ngTemplateOutlet="settingsTmpl; context:{ settings: settings }"></ng-container>
        </ul>
      </div>
      <div class="preview-area" [ngClass]="{'visible': preview }"><ng-container><ng-template classifiedsUiPaneContentHost></ng-template></ng-container></div>
    </mat-expansion-panel>
  </div>
</div>

<ng-template #settingsTmpl let-settings="settings">
  <li *ngFor="let setting of settings">
    {{ setting.displayName }}:
    <span *ngIf="setting.attributes.length == 0">{{ settings | attribute: setting.name }}</span>
    <ul *ngIf="setting.attributes.length > 0">
      <ng-container *ngTemplateOutlet="settingsTmpl; context:{ settings: setting.attributes }"></ng-container>
    </ul>
  </li>
</ng-template>
